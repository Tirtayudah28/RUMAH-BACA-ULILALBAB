<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galeri Publikasi - Rumah Baca Ulil Albab</title>
  <meta name="description" content="Jelajahi dokumentasi visual berbagai kegiatan dan program inspiratif dari Rumah Baca Ulil Albab">

  <!-- External Resources -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <link href="https://unpkg.com/tabler-icons@latest/iconfont/tabler-icons.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --rb-green: #15803d;
      --rb-orange: #f97316;
      --rb-green-light: #dcfce7;
      --rb-orange-light: #ffedd5;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fafafa;
    }
    
    .gradient-text {
      background: linear-gradient(135deg, var(--rb-green), var(--rb-orange));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .bg-pattern {
      background-image: url("https://transparenttextures.com/patterns/cubes.png");
      background-size: 200px;
    }
    
    .card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border-radius: 0.75rem;
      font-weight: 500;
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .btn-primary {
      background: var(--rb-green);
      color: white;
    }
    
    .btn-primary:hover {
      background: #166534;
    }
    
    .btn-outline {
      border: 1.5px solid #e5e7eb;
      background: white;
      color: #4b5563;
    }
    
    .btn-outline:hover {
      border-color: var(--rb-orange);
      color: var(--rb-orange);
    }
    
    .category-btn {
      padding: 0.5rem 1rem;
      border-radius: 0.75rem;
      font-weight: 500;
      transition: all 0.2s ease;
      cursor: pointer;
      background: white;
      color: #6b7280;
      border: 1.5px solid #e5e7eb;
    }
    
    .category-btn:hover {
      border-color: var(--rb-green);
      color: var(--rb-green);
    }
    
    .category-btn.active {
      background: var(--rb-green);
      color: white;
      border-color: var(--rb-green);
    }
    
    .gallery-item {
      position: relative;
      overflow: hidden;
      border-radius: 0.75rem;
      cursor: pointer;
      aspect-ratio: 1;
    }
    
    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    
    .gallery-item:hover img {
      transform: scale(1.05);
    }
    
    .gallery-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .gallery-item:hover .gallery-overlay {
      opacity: 1;
    }
    
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      padding: 1rem;
    }
    
    .modal.open {
      opacity: 1;
      pointer-events: auto;
    }
    
    .modal-content {
      background: white;
      border-radius: 1rem;
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow: auto;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .modal.open .modal-content {
      transform: scale(1);
    }
    
    .loading-spinner {
      width: 2rem;
      height: 2rem;
      border: 2px solid #e5e7eb;
      border-top: 2px solid var(--rb-green);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #c5c5c5;
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: var(--rb-orange);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">

<!-- Navbar -->
<div id="navbar"></div>

<!-- Hero Section -->
<section class="relative py-20 bg-green-800 text-white overflow-hidden">
  <div class="bg-pattern absolute inset-0 opacity-10"></div>
  <div class="container mx-auto px-4 md:px-6 relative z-10">
    <div class="max-w-3xl mx-auto text-center" data-aos="fade-up">
      <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-white/10 backdrop-blur-sm mb-6">
        <i class="bi bi-images text-3xl text-white"></i>
      </div>
      <h1 class="text-4xl md:text-5xl font-bold mb-4">Galeri <span class="text-orange-300">Publikasi</span></h1>
      <p class="text-lg text-green-100 max-w-2xl mx-auto">
        Dokumentasi visual berbagai kegiatan dan program inspiratif dari Rumah Baca Ulil Albab
      </p>
    </div>
  </div>
  <div class="absolute bottom-0 left-0 right-0 h-12 bg-white/10 backdrop-blur-sm"></div>
</section>

<!-- Category Filter -->
<section class="py-8 bg-white sticky top-0 z-30 shadow-sm">
  <div class="container mx-auto px-4 md:px-6">
    <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
      <h2 class="text-xl font-semibold text-gray-800">Filter Kategori</h2>
      
      <div class="flex flex-wrap gap-2" id="categoryFilter">
        <button data-category="all" class="category-btn active">Semua</button>
        <button data-category="education" class="category-btn">Pendidikan</button>
        <button data-category="community" class="category-btn">Komunitas</button>
        <button data-category="event" class="category-btn">Acara</button>
        <button data-category="program" class="category-btn">Program</button>
        <button data-category="facility" class="category-btn">Fasilitas</button>
      </div>
    </div>
  </div>
</section>

<!-- Gallery Section -->
<section class="py-12 flex-grow">
  <div class="container mx-auto px-4 md:px-6">
    <div id="galleryGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <!-- Gallery items will be loaded here -->
    </div>
    
    <div id="loadingIndicator" class="hidden mt-12 flex justify-center">
      <div class="loading-spinner"></div>
    </div>
    
    <div id="emptyState" class="hidden mt-12 text-center">
      <i class="bi bi-image text-5xl text-gray-300 mb-4"></i>
      <h3 class="text-xl font-semibold text-gray-600 mb-2">Tidak ada hasil ditemukan</h3>
      <p class="text-gray-500">Coba pilih kategori lainnya atau gunakan kata kunci berbeda</p>
    </div>
    
    <div class="mt-12 flex justify-center" id="loadMoreContainer">
      <button id="loadMoreBtn" class="btn btn-outline">
        <i class="bi bi-plus-circle"></i> Muat Lebih Banyak
      </button>
    </div>
  </div>
</section>

<!-- Image Modal -->
<div id="imageModal" class="modal">
  <div class="modal-content">
    <div class="relative">
      <button id="closeModal" class="absolute top-4 right-4 z-10 w-10 h-10 rounded-full bg-white/90 flex items-center justify-center text-gray-800 hover:text-red-500 transition">
        <i class="bi bi-x-lg text-xl"></i>
      </button>
      
      <div class="p-4">
        <div class="rounded-lg overflow-hidden mb-4">
          <img id="modalImage" src="" alt="" class="w-full h-auto max-h-[50vh] object-contain">
        </div>
        
        <div>
          <h3 id="modalTitle" class="text-xl font-semibold text-gray-800 mb-2"></h3>
          <p id="modalDescription" class="text-gray-600 mb-4"></p>
          <div class="flex items-center gap-2">
            <span id="modalCategory" class="px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"></span>
            <span id="modalDate" class="text-sm text-gray-500"></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<div id="footer"></div>

<!-- Scripts -->
<script src="../translate.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
  // Initialize AOS
  document.addEventListener('DOMContentLoaded', function() {
    AOS.init({
      duration: 800,
      easing: 'ease-out',
      once: true,
      offset: 50
    });
    
    // Load gallery items
    loadGalleryItems();
  });

  // Sample gallery data (replace with your actual data source)
  const galleryData = [
    { id: 1, title: "Kegiatan Membaca Bersama", description: "Anak-anak sedang asyik membaca buku bersama di Rumah Baca", category: "education", image: "https://picsum.photos/600/400?random=1", date: "15 Jan 2023" },
    { id: 2, title: "Workshop Literasi Digital", description: "Pelatihan penggunaan teknologi untuk mendukung literasi", category: "education", image: "https://picsum.photos/600/400?random=2", date: "22 Feb 2023" },
    { id: 3, title: "Donasi Buku dari Masyarakat", description: "Penyerahan buku-buku donasi dari masyarakat setempat", category: "community", image: "https://picsum.photos/600/400?random=3", date: "5 Mar 2023" },
    { id: 4, title: "Peresmian Rumah Baca Baru", description: "Acara peresmian cabang Rumah Baca yang baru", category: "event", image: "https://picsum.photos/600/400?random=4", date: "18 Mar 2023" },
    { id: 5, title: "Program Bimbingan Belajar", description: "Siswa-siswa mendapatkan bimbingan belajar gratis", category: "program", image: "https://picsum.photos/600/400?random=5", date: "2 Apr 2023" },
    { id: 6, title: "Interior Rumah Baca", description: "Tampilan dalam Rumah Baca yang nyaman untuk membaca", category: "facility", image: "https://picsum.photos/600/400?random=6", date: "10 Apr 2023" },
    { id: 7, title: "Lomba Bercerita Anak", description: "Anak-anak berpartisipasi dalam lomba bercerita", category: "event", image: "https://picsum.photos/600/400?random=7", date: "25 Apr 2023" },
    { id: 8, title: "Kunjungan dari Sekolah", description: "Siswa-siswa sekolah berkunjung ke Rumah Baca", category: "education", image: "https://picsum.photos/600/400?random=8", date: "8 Mei 2023" },
    { id: 9, title: "Pelatihan untuk Relawan", description: "Pelatihan untuk calon relawan Rumah Baca", category: "program", image: "https://picsum.photos/600/400?random=9", date: "15 Mei 2023" },
    { id: 10, title: "Perpustakaan Keliling", description: "Layanan perpustakaan keliling ke daerah terpencil", category: "program", image: "https://picsum.photos/600/400?random=10", date: "22 Mei 2023" },
    { id: 11, title: "Diskusi Buku Bulanan", description: "Acara diskusi buku yang diadakan setiap bulan", category: "community", image: "https://picsum.photos/600/400?random=11", date: "5 Jun 2023" },
    { id: 12, title: "Pameran Buku Anak", description: "Pameran buku-buku khusus untuk anak-anak", category: "event", image: "https://picsum.photos/600/400?random=12", date: "18 Jun 2023" }
  ];

  // Current state
  let currentCategory = 'all';
  let displayedItems = 8;
  const itemsPerLoad = 4;

  // DOM elements
  const galleryGrid = document.getElementById('galleryGrid');
  const loadingIndicator = document.getElementById('loadingIndicator');
  const emptyState = document.getElementById('emptyState');
  const loadMoreContainer = document.getElementById('loadMoreContainer');
  const loadMoreBtn = document.getElementById('loadMoreBtn');
  const imageModal = document.getElementById('imageModal');
  const closeModal = document.getElementById('closeModal');
  const categoryButtons = document.querySelectorAll('.category-btn');

  // Load gallery items based on current filters
  function loadGalleryItems() {
    loadingIndicator.classList.remove('hidden');
    galleryGrid.innerHTML = '';
    
    // Simulate loading delay
    setTimeout(() => {
      const filteredItems = currentCategory === 'all' 
        ? galleryData 
        : galleryData.filter(item => item.category === currentCategory);
      
      if (filteredItems.length === 0) {
        emptyState.classList.remove('hidden');
        loadMoreContainer.classList.add('hidden');
      } else {
        emptyState.classList.add('hidden');
        
        // Show only the number of items based on displayedItems
        const itemsToShow = filteredItems.slice(0, displayedItems);
        
        itemsToShow.forEach(item => {
          const galleryItem = createGalleryItem(item);
          galleryGrid.appendChild(galleryItem);
        });
        
        // Show/hide load more button
        if (filteredItems.length > displayedItems) {
          loadMoreContainer.classList.remove('hidden');
        } else {
          loadMoreContainer.classList.add('hidden');
        }
      }
      
      loadingIndicator.classList.add('hidden');
    }, 500);
  }

  // Create gallery item element
  function createGalleryItem(item) {
    const itemElement = document.createElement('div');
    itemElement.className = 'gallery-item card card-hover';
    itemElement.dataset.category = item.category;
    
    const categoryNames = {
      education: 'Pendidikan',
      community: 'Komunitas',
      event: 'Acara',
      program: 'Program',
      facility: 'Fasilitas'
    };
    
    itemElement.innerHTML = `
      <img src="${item.image}" alt="${item.title}" loading="lazy">
      <div class="gallery-overlay">
        <h3 class="text-white font-semibold mb-1">${item.title}</h3>
        <p class="text-white/90 text-sm line-clamp-2">${item.description}</p>
        <span class="mt-2 inline-block px-2 py-1 rounded-full text-xs font-medium bg-white/20 text-white">
          ${categoryNames[item.category]}
        </span>
      </div>
    `;
    
    itemElement.addEventListener('click', () => openModal(item));
    return itemElement;
  }

  // Open modal with image details
  function openModal(item) {
    const categoryNames = {
      education: 'Pendidikan',
      community: 'Komunitas',
      event: 'Acara',
      program: 'Program',
      facility: 'Fasilitas'
    };
    
    document.getElementById('modalImage').src = item.image;
    document.getElementById('modalImage').alt = item.title;
    document.getElementById('modalTitle').textContent = item.title;
    document.getElementById('modalDescription').textContent = item.description;
    document.getElementById('modalCategory').textContent = categoryNames[item.category];
    document.getElementById('modalDate').textContent = item.date;
    
    imageModal.classList.add('open');
    
    // Prevent body scrolling when modal is open
    document.body.style.overflow = 'hidden';
  }

  // Close modal
  function closeImageModal() {
    imageModal.classList.remove('open');
    document.body.style.overflow = 'auto';
  }

  // Event listeners
  categoryButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Update active button
      categoryButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      
      // Update current category and reset displayed items
      currentCategory = button.dataset.category;
      displayedItems = 8;
      
      // Reload gallery
      loadGalleryItems();
    });
  });

  loadMoreBtn.addEventListener('click', () => {
    displayedItems += itemsPerLoad;
    loadGalleryItems();
  });

  closeModal.addEventListener('click', closeImageModal);

  // Close modal when clicking outside
  imageModal.addEventListener('click', (e) => {
    if (e.target === imageModal) {
      closeImageModal();
    }
  });

  // Close modal with Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && imageModal.classList.contains('open')) {
      closeImageModal();
    }
  });

  // Load components (navbar and footer)
  async function loadComponent(id, file) {
    try {
      const res = await fetch(file);
      const html = await res.text();
      document.getElementById(id).innerHTML = html;

      // Re-run scripts in the loaded file
      const scripts = document.getElementById(id).querySelectorAll('script');
      scripts.forEach(oldScript => {
        const newScript = document.createElement('script');
        if (oldScript.src) {
          newScript.src = oldScript.src;
        } else {
          newScript.textContent = oldScript.textContent;
        }
        document.body.appendChild(newScript);
      });
    } catch (error) {
      console.error(`Error loading ${file}:`, error);
    }
  }

  // Load navbar and footer
  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('navbar', '../navbar.html');
    loadComponent('footer', '../footer.html');
  });
</script>
</body>
</html>