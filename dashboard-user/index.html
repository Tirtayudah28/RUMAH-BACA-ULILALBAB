<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User Dashboard - Pojok Baca</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <style>
    body { font-family: 'Poppins', sans-serif; color:#0f172a; }
    .sidebar-link { 
      @apply flex items-center gap-3 px-4 py-2 rounded-lg text-gray-600 hover:bg-emerald-100 hover:text-emerald-700 cursor-pointer transition; 
    }
    .sidebar-link.active { 
      @apply bg-emerald-600 text-white font-semibold shadow-sm; 
    }
    .btn-primary { background: linear-gradient(90deg,#f97316,#fb923c); color: #fff; }
    .btn-primary:hover { filter: brightness(.95); }

    /* ðŸ‘‡ dropdown hanya muncul di 480â€“780px */
    #responsiveDropdown { display: none; }
    @media (min-width:480px) and (max-width:780px) {
      aside { display: none !important; }   /* sembunyikan sidebar */
      #responsiveDropdown { display: block; }
    }
  </style>

  <style>
  /* Dropdown hanya muncul di â‰¤780px */
  #responsiveDropdown { display: none; }
  @media (max-width:780px) {
    aside { display: none !important; }   /* sembunyikan sidebar */
    #responsiveDropdown { display: block; }
  }
</style>
</head>
<body class="bg-gray-50 flex min-h-screen">

  <div id="navbar"></div>

  <!-- Sidebar -->
  <aside class="w-72 hidden md:flex flex-col justify-between shadow-md p-6">
    <div class="mt-16 cursor-pointer">
      <nav class="space-y-4 text-md font-medium">
        <div class="sidebar-link active" data-tab="activity"><i class="bi bi-activity"></i> My Activity</div>
        <div class="sidebar-link" data-tab="donation"><i class="bi bi-heart"></i> Donation</div>
        <div class="sidebar-link" data-tab="stats"><i class="bi bi-graph-up"></i> Statistics</div>
      </nav>
    </div>

    <div class="pt-6 border-t border-gray-200 space-y-2 cursor-pointer">
      <div class="sidebar-link" data-tab="settings"><i class="bi bi-gear"></i> Settings</div>
      <div class="sidebar-link text-red-500" data-tab="logout"><i class="bi bi-box-arrow-right"></i> Logout</div>
    </div>
  </aside>

  <!-- Main Section -->
  <section class="flex flex-col flex-1">

    <!-- Content -->
    <main class="flex-1 p-6 overflow-y-auto mt-16">

      <!-- Activity -->
      <section id="activity" class="tab-content">
        <h2 class="text-lg font-semibold mb-4">My Activity</h2>
        
        <div class="bg-white p-6 rounded-xl max-w-xl shadow-sm border border-gray-100">
          <!-- Dropdown -->
          <div class="relative inline-block mb-6">
            <button id="innerDropdownBtn" class="inline-flex items-center gap-2 px-4 py-2 rounded-md border border-gray-200 bg-white hover:bg-gray-50 text-sm font-medium shadow-sm">
              Options
              <i class="bi bi-chevron-down text-gray-500"></i>
            </button>
            <!-- Dropdown Menu -->
            <div id="innerDropdownMenu" class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black/5 hidden z-20">
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-emerald-50">All Time</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-emerald-50">Last 30 Days</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-emerald-50">Last 7 Days</a>
            </div>
          </div>
  
          <!-- Stats Card -->
          <div class="flex flex-row gap-[8rem]">
            <div class="">
              <p class="text-gray-600">Books</p>
              <p class="text-xl font-bold text-neutral-700">12</p>
            </div>
            <div class="">
              <p class="text-gray-600">Videos</p>
              <p class="text-xl font-bold text-neutral-700">12</p>
            </div>
            <div class="">
              <p class="text-gray-600">Downloaded</p>
              <p class="text-xl font-bold text-neutral-700">12</p>
            </div>
          </div>
        </div>
  
        <!-- Tabs -->
        <div class="w-full border-b mt-8 flex gap-6 font-semibold text-gray-600">
          <div id="markBook" class="tab-btn pb-2 border-b-2 border-transparent hover:border-emerald-600 cursor-pointer">Bookmarks</div>
          <div id="markHistory" class="tab-btn pb-2 border-b-2 border-transparent hover:border-emerald-600 cursor-pointer">History</div>
        </div>
      </section>

      <section class="bg-white mt-10 rounded-md p-6">
        <!-- Bookmarks -->
        <div id="bookmarkContent" class="mt-4 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
          <div class="cursor-pointer">
            <img src="../image/event.jpg" class="w-full h-32 object-cover">
            <span class="block mt-2 text-sm font-medium">Buku: Membaca Dunia Literasi</span>
          </div>
          <div class="cursor-pointer">
            <img src="../image/event.jpg" class="w-full h-32 object-cover">
            <span class="block mt-2 text-sm font-medium">Video: Inspirasi Membaca</span>
          </div>
        </div>
    
        <!-- History -->
        <div id="historyContent" class="mt-4 hidden grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
          <div class="cursor-pointer">
            <img src="../image/event.jpg" class="w-full h-32 object-cover">
            <span class="block mt-2 text-sm font-medium">Buku: Sejarah Peradaban</span>
          </div>
          <div class="cursor-pointer">
            <img src="../image/event.jpg" class="w-full h-32 object-cover">
            <span class="block mt-2 text-sm font-medium">Video: Kajian Sains & Iman</span>
          </div>
        </div>
      </section>
    </main>
  </section>

  <script>


  // Tabs Bookmarks / History
  const markBook = document.getElementById("markBook");
  const markHistory = document.getElementById("markHistory");
  const bookmarkContent = document.getElementById("bookmarkContent");
  const historyContent = document.getElementById("historyContent");

  if (markBook && markHistory) {
    markBook.addEventListener("click", () => {
      bookmarkContent.classList.remove("hidden");
      historyContent.classList.add("hidden");
      markBook.classList.add("border-emerald-600");
      markHistory.classList.remove("border-emerald-600");
    });

    markHistory.addEventListener("click", () => {
      historyContent.classList.remove("hidden");
      bookmarkContent.classList.add("hidden");
      markHistory.classList.add("border-emerald-600");
      markBook.classList.remove("border-emerald-600");
    });
  }

  // Inner dropdown (Options di Activity)
  const innerDropdownBtn = document.getElementById("innerDropdownBtn");
  const innerDropdownMenu = document.getElementById("innerDropdownMenu");

  if (innerDropdownBtn && innerDropdownMenu) {
    innerDropdownBtn.addEventListener("click", () => {
      innerDropdownMenu.classList.toggle("hidden");
    });
    document.addEventListener("click", (e) => {
      if (!innerDropdownBtn.contains(e.target) && !innerDropdownMenu.contains(e.target)) {
        innerDropdownMenu.classList.add("hidden");
      }
    });
  }

  // include navbar dan 
  async function loadComponent(id, file) {
    const res = await fetch(file);
    const html = await res.text();
    document.getElementById(id).innerHTML = html;

    // Jalankan ulang semua <script> di file yang di-load
    const scripts = document.getElementById(id).querySelectorAll("script");
    scripts.forEach(oldScript => {
      const newScript = document.createElement("script");
      if (oldScript.src) {
        newScript.src = oldScript.src; // untuk file eksternal
      } else {
        newScript.textContent = oldScript.textContent; // untuk inline script
      }
      document.body.appendChild(newScript);
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    loadComponent("navbar", "../navbar.html");
  });
</script>

</body>
</html>
